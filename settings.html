<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
        <link rel="stylesheet" href="css/style.css">
        <link rel="icon" href="img/media/logo.svg">
    
        <script type="module" src="lib/js/activation.js"></script>
        <script type="module" src="lib/js/settings.js"></script>
        <script type="module" src="lib/js/event.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                fetch('http://127.0.0.1:3000/api/check-auth', {
                method: 'GET',
                credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        window.location.href = 'verify.html';
                    } else {
                        loadUserInfo();
                    }
                })
                .catch(error => console.error('–û—à–∏–±–∫–∞:', error));
            });
        </script>
    
        <title>‚Ä¢ –ì–ª–∞–≤–Ω–∞—è ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    </head>
<body id="settings-page">
    <div class="container">
        <div class="frame">
            <header>
                <div class="logo">
                    <a href="index.html"><img src="img/media/full-logo.svg" alt="–ß–¢–û-–¢–û –ù–û–í–û–ï"></a>
                </div>
            </header>
            <div class="main">
                <div class="menu">
                    <div class="list">
                        <button onclick="openOption('main')"><img src="img/background/button-pattern/house.svg" alt="üè†">–ì–ª–∞–≤–Ω–∞—è</button>
                        <button onclick="openOption('personal')"><img src="img/background/button-pattern/identification-badge.svg" alt="üìá">–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
                        <button id="organizer-panel" onclick="openOption('organizer')"><img src="img/background/button-pattern/hands-clapping.svg" alt="üëè">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏</button>
                        <button id="admin-panel" onclick="openOption('admin')"><img src="img/background/button-pattern/terminal-window.svg" alt="üèóÔ∏è">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
                        <button onclick="openOption('security')"><img src="img/background/button-pattern/shield-check.svg" alt="üõ°Ô∏è">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤—Ö–æ–¥</button>
                    </div>
                    <div class="back">
                        <a href="site.html"><button><img src="img/background/button-pattern/arrow-u-up-left.svg" alt="üîô">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç</button></a>
                    </div>
                </div>
                <div id="main" class="operational">
                    <div class="main">
                        <div class="user-block" onclick="openOption('personal')">
                            <div class="wrapper">
                                <div class="avatar">
                                    <p id="initials" data-initials="true">–ò–§</p>
                                </div>
                                <div class="user-info">
                                    <p data-user="true">–ò–º—è –§–∞–º–∏–ª–∏—è</p>
                                    <p id="id" data-id="true">ID: 000000000</p>
                                </div>
                            </div>
                            <div class="end-doublearrow">
                                <img src="img/background/button-pattern/caret-double-right.svg" alt=">>">
                            </div>
                        </div>
                        <div id="protected" class="protected">
                            <img src="img/background/button-pattern/shield-plus.svg" alt="üõ°Ô∏è">
                            <p>–ê–∫–∫–∞—É–Ω—Ç –Ω–∞–¥—ë–∂–Ω–æ –∑–∞—â–∏—â—ë–Ω!</p>
                        </div>
                        <div id="organizered" class="organizered">
                            <img src="img/background/button-pattern/seal-check.svg" alt="‚òëÔ∏è">
                            <p>–î–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∞–≤–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞.</p>
                        </div>
                        <div id="admined" class="admined">
                            <img src="img/background/button-pattern/seal-check.svg" alt="ü§ñ">
                            <p>–î–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.</p>
                        </div>
                    </div>
                    <div class="options">
                        <p>–û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</p>
                        <div class="action" onclick="openChangePassword()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/key.svg" alt="üîë">
                                <div class="title">
                                    <p>–ü–∞—Ä–æ–ª—å</p>
                                    <p id="changed-at" data-password="true">–ë—ã–ª –∏–∑–º–µ–Ω—ë–Ω 01.01.1900</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                        <div class="action" onclick="openChangePhone()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/device-mobile-speaker.svg" alt="üì±">
                                <div class="title">
                                    <p>–¢–µ–ª–µ—Ñ–æ–Ω</p>
                                    <p id="phone" data-phone="true">+7 *** *** ** 01</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                        <div class="action" onclick="openChangeEmail()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/envelope.svg" alt="‚úâÔ∏è">
                                <div class="title">
                                    <p>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</p>
                                    <p id="email" data-email="true">example@example.ru</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                        <div class="action" onclick="openOption('personal')">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/cake.svg" alt="üéÇ">
                                <div class="title">
                                    <p>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</p>
                                    <p id="subtitle">–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="personal" class="operational">
                    <div class="user-block">
                        <div class="wrapper">
                            <div class="avatar">
                                <p data-initials="true">–ò–§</p>
                            </div>
                            <div class="user-info">
                                <p id="user" data-user="true">–ò–º—è –§–∞–º–∏–ª–∏—è</p>
                                <div class="id">
                                    <p id="id" data-id="true">ID: 000000000</p>
                                    <button onclick="copyToClipboard()"><img src="img/background/button-pattern/copy-simple.svg" alt="#"></button>
                                </div>                         
                            </div>
                        </div>
                        <div class="personal">
                            <div class="input">
                                <img src="img/background/button-pattern/user.svg" alt="–ò">
                                <input id="name-in" type="text" maxlength="50" placeholder="–ò–º—è" oninput="validateName(event)">
                            </div>
                            <div class="input">
                                <img src="img/background/button-pattern/users-three.svg" alt="–§">
                                <input id="surname-in" type="text" maxlength="100" placeholder="–§–∞–º–∏–ª–∏—è" oninput="validateName(event)">
                            </div>
                        </div>
                        <div class="details">
                            <div class="wrapper">
                                <div class="input">
                                    <img src="img/background/button-pattern/hand-eye.svg" alt="–ü">
                                    <select id="gender-in">
                                        <option value="–ú—É–∂—Å–∫–æ–π">‚ôÇÔ∏è –ú—É–∂—Å–∫–æ–π</option>
                                        <option value="–ñ–µ–Ω—Å–∫–∏–π">‚ôÄÔ∏è –ñ–µ–Ω—Å–∫–∏–π</option>
                                        <option value="–ù–µ —É–∫–∞–∑–∞–Ω">üêè –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π</option>
                                    </select>
                                </div>                
                                <div class="input">
                                    <img src="img/background/button-pattern/gift.svg" alt="–î–†">
                                    <input id="dob-in" type="date" min="1900-01-01">
                                </div>
                            </div>
                            <div class="input">
                                <img src="img/background/button-pattern/map-pin.svg" alt="–ì">
                                <input id="city-in" list="cities" type="text" maxlength="100" placeholder="–ì–æ—Ä–æ–¥" oninput="validateCity(event)">
                                <datalist id="cities"></datalist>
                            </div>
                        </div>
                        <button onclick="savePersonal()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                    <div class="options">
                        <p>–î–µ–π—Å—Ç–≤–∏—è —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º</p>
                        <div class="action" onclick="confirmDelete()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/trash.svg" alt="üóëÔ∏è">
                                <div class="title">
                                    <p>–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</p>
                                    <p id="subtitle">–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∏ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –Ω—ë–º</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                    </div>
                    <div class="options">
                        <div class="action" onclick="logOut()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/door-open.svg" alt="üö™">
                                <div class="title">
                                    <p>–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="organizer" class="operational">
                    <div id="createEvent" class="options">
                        <p id="title-event">–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</p>
                        <div class="step-wrapper">
                            <div id="step1" class="step">
                                <div id="c-title" class="input">
                                    <img src="img/background/button-pattern/text-H.svg" alt="H">
                                    <input type="text" id="title-in" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫">
                                </div>
                                <div id="c-description" class="input">
                                    <img src="img/background/button-pattern/text-indent.svg" alt=">|">
                                    <textarea id="description-in" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è"></textarea>
                                </div>
                                <div id="c-image" class="input">
                                    <input type="file" id="event-image" accept="image/*" onchange="validateAndShowPreview(event)">
                                    <img id="preview">
                                </div>
                                <button onclick="openNextStep()">–î–∞–ª–µ–µ</button>
                            </div>
                            <div id="step2" class="step">
                                <div class="wrapper">
                                    <div id="c-date" class="input">
                                        <img src="img/background/button-pattern/calendar-dots.svg" alt="D">
                                        <input type="date" id="e-date-in">
                                    </div>
                                    <div id="c-time" class="input">
                                        <img src="img/background/button-pattern/clock.svg" alt="T">
                                        <input type="time" id="time-in">
                                    </div>
                                </div>
                                <div class="wrapper">
                                    <div id="c-city" class="input">
                                        <img src="img/background/button-pattern/map-pin.svg" alt="C">
                                        <input id="e-city-in" list="cities" type="text" maxlength="100" placeholder="–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ?" oninput="validateCity(event)">
                                        <datalist id="cities"></datalist>
                                    </div>
                                    <div id="c-building" class="input">
                                        <img src="img/background/button-pattern/buildings.svg" alt="B">
                                        <input type="text" id="building-in" placeholder="–ì–¥–µ –∂–µ —ç—Ç–æ –±—É–¥–µ—Ç?">
                                    </div>
                                </div>
                                <div class="wrapper">
                                    <div id="c-category" class="input">
                                        <img src="img/background/button-pattern/funnel.svg" alt="C">
                                        <select id="category-in" onchange="updateSubcategories()">
                                            <option value="cinema">üé¨ –ö–∏–Ω–æ</option>
                                            <option value="concert">ü™ó –ö–æ–Ω—Ü–µ—Ä—Ç</option>
                                            <option value="theatre">üé≠ –¢–µ–∞—Ç—Ä</option>
                                            <option value="sport">üèÖ –°–ø–æ—Ä—Ç</option>
                                        </select>
                                    </div>
                                    <div id="c-category" class="input">
                                        <select id="subcategory-in">
                                            <option value="drama">üé≠ –î—Ä–∞–º–∞</option>
                                            <option value="comedy">üòÇ –ö–æ–º–µ–¥–∏—è</option>
                                            <option value="action">üî• –ë–æ–µ–≤–∏–∫</option>
                                            <option value="sci-fi">üöÄ –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
                                            <option value="horror">üëª –£–∂–∞—Å—ã</option>
                                            <option value="thriller">üò± –¢—Ä–∏–ª–ª–µ—Ä</option>
                                            <option value="romance">üíï –ú–µ–ª–æ–¥—Ä–∞–º–∞</option>
                                            <option value="animation">üé® –ê–Ω–∏–º–∞—Ü–∏—è</option>
                                            <option value="documentary">üìö –î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π</option>
                                            <option value="adventure">üß≠ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</option>
                                            <option value="fantasy">üßô –§—ç–Ω—Ç–µ–∑–∏</option>
                                            <option value="biography">üë§ –ë–∏–æ–≥—Ä–∞—Ñ–∏—è</option>
                                            <option value="history">üèõÔ∏è –ò—Å—Ç–æ—Ä–∏—è</option>
                                            <option value="crime">üïµÔ∏è –ö—Ä–∏–º–∏–Ω–∞–ª</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="wrapper">
                                    <div id="c-url" class="input">
                                        <img src="img/background/button-pattern/ticket.svg" alt="T">
                                        <input type="text" id="url-in" placeholder="((—Å—Å—ã–ª–∫–∞ –Ω–∞ –±–∏–ª–µ—Ç))">
                                    </div>
                                    <div id="c-price" class="input">
                                        <img src="img/background/button-pattern/currency-rub.svg" alt="P">
                                        <input type="number" id="event-price" step="50" placeholder="–¶–µ–Ω–∞">
                                    </div>
                                </div>
                                <button onclick="submitEvent()">–°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</button>
                            </div>
                        </div>
                    </div>
                    <div class="options">
                        <p>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</p>
                        <div id="public" class="events"></div>
                    </div>
                    <div class="options">
                        <p>–ê—Ä—Ö–∏–≤ —Å–æ–±—ã—Ç–∏–π</p>
                        <div id="ended" class="events"></div>
                    </div>
                    <div class="options">
                        <p>–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</p>
                        <div id="checking" class="events"></div>
                    </div>
                </div>
                <button id="organizerImg" class="add" onclick="openCreateEvent()"><img id="addImg" src="img/background/button-pattern/+.svg" alt="+"></button>
                <div id="admin" class="operational">
                    <div class="options">
                        <p>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</p>
                        <div id="a-public" class="events"></div>
                    </div>
                    <div class="options">
                        <p>–ê—Ä—Ö–∏–≤ —Å–æ–±—ã—Ç–∏–π</p>
                        <div id="a-ended" class="events"></div>
                    </div>
                    <div class="options">
                        <p>–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</p>
                        <div id="a-checking" class="events"></div>
                    </div>
                </div>
                <div id="security" class="operational">
                    <div id="protect" class="protect">
                        <img src="img/background/button-pattern/siren.svg" alt="ü§ñ">
                        <div class="title">
                            <p>–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç –≤–∑–ª–æ–º–∞–ª–∏?</p>
                            <p id="subtitle">–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∫—Ä–æ–º–µ –≤–∞—Å –ø–æ–ª—É—á–∏–ª –∫ –Ω–µ–º—É –¥–æ—Å—Ç—É–ø</p>
                        </div>                       
                    </div>
                    <div class="options">
                        <div class="title">
                            <p id="title">–î–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
                            <p id="subtitle">–í–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–∞–º</p>
                        </div>
                        <div class="action" onclick="openChangePhone()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/device-mobile-speaker.svg" alt="üì±">
                                <div class="title">
                                    <p>–¢–µ–ª–µ—Ñ–æ–Ω</p>
                                    <p id="phone" data-phone="true">+7 *** *** ** 01</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                        <div class="action" onclick="openChangeEmail()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/envelope.svg" alt="‚úâÔ∏è">
                                <div class="title">
                                    <p>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</p>
                                    <p id="email" data-email="true">example@example.ru</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                    </div>
                    <div class="options">
                        <p>–°–ø–æ—Å–æ–±—ã –≤—Ö–æ–¥–∞</p>
                        <div class="action" onclick="openChangePassword()">
                            <div class="wrapper">
                                <img src="img/background/button-pattern/key.svg" alt="üîë">
                                <div class="title">
                                    <p>–ü–∞—Ä–æ–ª—å</p>
                                    <p id="changed-at" data-password="true">–ë—ã–ª –∏–∑–º–µ–Ω—ë–Ω 01.01.1900</p>
                                </div>
                            </div>
                            <div class="end-arrow">
                                <img src="img/background/button-pattern/caret-right.svg" alt=">">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="alerts">
                <!-- <div class="alert-box">
                            <img src="img/alerts/siren.svg" alt="ERR">
                            <p>–û—à–∏–±–∫–∞! –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏..</p>
                            <button><img src="img/alerts/X.svg" alt="X"></button>
                        </div>
                        <div class="alert-box">
                            <img src="img/alerts/warning.svg" alt="WRN">
                            <p>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ! –¢–µ–∫—Å—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è..</p>
                            <button><img src="img/alerts/X.svg" alt="X"></button>
                        </div>
                        <div class="alert-box">
                            <img src="img/alerts/check-circle.svg" alt="SUC">
                            <p>–£—Å–ø–µ—Ö! –¢–µ–∫—Å—Ç —É—Å–ø–µ—Ö–∞..</p>
                            <button><img src="img/alerts/X.svg" alt="X"></button>
                        </div> -->
            </div>
            <div id="modals" class="modals">
                <!-- <div class="modal-content">
                    <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?<br>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
                    <div class="modal-buttons">
                        <button id="confirmButton" class="modal-btn-confirm">–£–¥–∞–ª–∏—Ç—å</button>
                        <button id="cancelButton" class="modal-btn-cancel">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                    <img id="background" src="img/online-check-in.svg">
                    <div class="wrapper">
                        <div class="inputs">
                            <div class="input">
                                <img src="img/background/button-pattern/key.svg" alt="–°–ü">
                                <input id="o-password-in" type="text" maxlength="255" placeholder="–¢–∞–∫-—Å! –ù—É–∂–µ–Ω —Ç–≤–æ–π —Å—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å.." oninput="blockCyrillic(event)" onblur="validateCheckPassword(event)">
                            </div>
                            <div class="input">
                                <img src="img/background/button-pattern/key.svg" alt="–ù–ü">
                                <input id="c-password-in" type="password" maxlength="255" placeholder="–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å.." oninput="blockCyrillic(event)" onblur="validateCheckPassword(event)">
                            </div>
                            <div class="input">
                                <img src="img/background/button-pattern/keyhole.svg" alt="–ü–ü">
                                <input id="c-confirmPassword-in" type="password" maxlength="255" placeholder="–î–∞–≤–∞–π-–∫–∞ –µ—â–µ —Ä–∞–∑–æ–∫, —á—Ç–æ–±—ã –±–µ–∑ –æ—à–∏–±–æ–∫!" oninput="blockCyrillic(event)">
                            </div>
                        </div>
                        <div class="modal-buttons">
                            <button id="changeButton" class="change" onclick="changePassword()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                            <button id="cancelButton" class="cancel">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div> -->
                
            </div>
        </div>
    </div>
</body>
</html>